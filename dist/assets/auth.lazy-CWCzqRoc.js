import{c as d,b as u,t as h,r as p,f as x,j as s,g as i,B as g,z as r,h as f,J as j}from"./index-BuAxSJaU.js";import{C as b,a as y,b as w,c as C}from"./card-DPoa1Zzb.js";const F=d("/_auth/auth")({component:N});function N(){const a=u({resolver:h(S)}),[t,n]=p.useState(!1),o=x();async function l(c){try{n(!0);const{data:e,status:m}=await f.post("https://api.shoshcargo.uz/api/v1/auth/login/",c);m===200&&(localStorage.setItem("token",e.access),localStorage.setItem("refresh",e.refresh),o({to:"/"}))}catch(e){j.error(e.response.data.detail||"Bunday user mavjud emas")}finally{n(!1)}}return s.jsx("div",{className:"flex h-screen items-center justify-center px-4",children:s.jsxs(b,{className:"w-full max-w-sm",children:[s.jsx(y,{children:s.jsx(w,{className:"text-lg sm:text-2xl text-center",children:"Kirish"})}),s.jsx(C,{className:"p-4 sm:p-6 pt-0",children:s.jsxs("form",{onSubmit:a.handleSubmit(l),className:" space-y-4",children:[s.jsx(i,{name:"username",label:"Login",methods:a,disabled:t}),s.jsx(i,{name:"password",label:"Parol",type:"password",methods:a,disabled:t}),s.jsx(g,{type:"submit",loading:t,className:"w-full",children:"Kirish"})]})})]})})}const S=r.object({username:r.string().min(1,"Loginingizni kiriting"),password:r.string().min(1,"Parolingizini kiriting")});export{F as Route};
